meta:
  open_vocab:
    - ladder
    - ladder like
    - scaffold
    - rebar
    - roof
    - edge
    - hole
    - trench
    - guardrail
    - platform
    - cable
    - wire
    - cord
    - extension cord
    - power cord
    - hose
    - rope
    - debris
    - uneven floor
    - wet floor sign
    - rack
    - shelf
    - low beam
    - grinder
    - saw
    - cutting
    - forklift
    - car
    - vehicle
    - hoist
    - car lift
    - person
    - screen
    - laptop
  thresholds:
    # Umbrales por contexto (globales)
    default_conf: 0.22
    office_conf: 0.22
    construction_conf: 0.30
    warehouse_conf: 0.26
    industrial_conf: 0.30
    outdoor_conf: 0.30
  class_thresholds:
    # Afinado por clase dentro de cada contexto
    warehouse:
      cable: 0.20
      rope: 0.20
      hose: 0.20
      wire: 0.20
      cord: 0.20
    industrial:
      cable: 0.22
      rope: 0.22
      hose: 0.22
      wire: 0.22
      cord: 0.22

contexts:
  construction:
    any: ["scaffold", "ladder", "rebar", "roof", "edge", "hole", "trench"]
  warehouse:
    any: ["forklift", "rack", "shelf", "cable", "rope", "hose", "debris"]
  industrial:
    any: ["machine", "press", "gear", "grinder", "saw", "cable", "hose", "vehicle"]
  outdoor:
    any: ["roof", "edge", "trench", "hole"]
  office:
    any: ["desk", "chair", "screen", "laptop", "cable"]

risks:
  # -------- LOCATIVOS ----------
  R-LOC-EDGE-OPEN:
    tipo: "LOCATIVO"
    nombre: "Borde sin protección"
    descripcion: "Caída a distinto nivel por borde/abertura sin protección colectiva."
    context: ["construction", "outdoor"]
    if_any: ["edge_open"]
    if_all: ["person_on_edge"]
    severidad: "CRITICA"
    normativa:
      - "Decreto 1072/2015 – Jerarquía de controles"
      - "Resolución 2400/1979 – Protección perimetral"
    controles:
      Eliminación: ["Restringir acceso hasta instalar protección colectiva"]
      Ingeniería: ["Barandas, rodapié, redes de seguridad, líneas de vida"]
      Administrativos: ["Permisos de trabajo en altura, supervisión"]
      EPP: ["Arnés con eslinga y punto de anclaje certificado"]

  R-LOC-HOLE:
    tipo: "LOCATIVO"
    nombre: "Hueco en piso sin señalización"
    descripcion: "Abertura en piso/plataforma sin protección."
    context: ["construction", "warehouse", "industrial"]
    if_any: ["hole", "trench"]
    severidad: "ALTA"
    controles:
      Ingeniería: ["Cubrir hueco con tapa resistente", "Barandas perimetrales"]
      Administrativos: ["Señalización temporal y bloqueo"]

  R-LOC-SPILL:
    tipo: "LOCATIVO"
    nombre: "Resbalón por derrame"
    descripcion: "Líquidos/aceites que generan deslizamiento."
    context: ["warehouse", "industrial", "office"]
    if_any: ["spill", "wet_floor"]
    severidad: "MEDIA"
    controles:
      Eliminación: ["Limpieza inmediata del derrame"]
      Administrativos: ["Procedimiento de reporte y contención"]
      EPP: ["Calzado antideslizante"]

  R-LOC-CABLE:
    tipo: "LOCATIVO"
    nombre: "Tropiezo por cableado/obstáculo"
    descripcion: "Cables, mangueras o sogas en paso peatonal."
    context: ["office", "warehouse", "industrial"]
    if_any: ["cable", "debris", "floor_irregular", "foot_near_obstacle"]
    severidad: "MEDIA"
    normativa:
      - "OSHA 1910.22"
    controles:
      Ingeniería: ["Canalización o cubrecables"]
      Administrativos: ["Orden y limpieza (5S)"]

  # Variante inminente (si quieres marcar más fuerte)
  R-LOC-CABLE-IMMINENT:
    tipo: "LOCATIVO"
    nombre: "Tropiezo inminente por cable/obstáculo"
    descripcion: "Obstáculo en la banda de los pies con persona presente."
    context: ["warehouse", "industrial", "office"]
    if_all: ["person", "foot_near_obstacle"]
    severidad: "ALTA"
    controles:
      Eliminación: ["Retirar el obstáculo inmediatamente"]
      Administrativos: ["Demarcar rutas peatonales y asegurar cableado"]

  # -------- MECÁNICOS ----------
  R-MEC-UNDER-LIFT:
    tipo: "MECÁNICO"
    nombre: "Persona bajo vehículo elevado sin aseguramiento"
    descripcion: "Riesgo de aplastamiento por vehículo en elevador sin soportes seguros."
    context: ["industrial", "warehouse"]
    if_any: ["vehicle_on_lift"]
    if_all: ["person_under_vehicle"]
    severidad: "CRITICA"
    controles:
      Eliminación: ["Evitar trabajo bajo carga suspendida"]
      Ingeniería: ["Caballetes/soportes certificados; bloqueo mecánico"]
      Administrativos: ["LOTO del elevador; zona demarcada; supervisión"]
      EPP: ["Calzado de seguridad; protección craneal"]

  R-MEC-GUARD-MISSING:
    tipo: "MECÁNICO"
    nombre: "Partes móviles sin resguardo"
    descripcion: "Rodillos/correas/engranes expuestos en operación."
    context: ["industrial","warehouse"]
    if_any: ["moving_part","roller","belt","gear","grinder","saw","cutting","guard_missing"]
    if_all: ["machine"]
    severidad: "CRITICA"
    controles:
      Ingeniería: ["Resguardos fijos o enclavados","Paro de emergencia accesible"]
      Administrativos: ["LOTO en mantenimiento","Capacitación específica"]

  # -------- ERGONÓMICOS (heurísticos mínimos sin pose) ----------
  R-ERGO-TRUNK-FLEXION:
    tipo: "ERGONÓMICO"
    nombre: "Flexión lumbar elevada"
    descripcion: "Inclinación del tronco >45° (heurística sin pose)."
    context: ["warehouse","industrial","office"]
    if_any: ["trunk_flexion_high"]
    severidad: "ALTA"
    controles:
      Ingeniería: ["Mesas a altura adecuada","Elevadores de carga"]
      Administrativos: ["Técnicas de levantamiento","Rotación de tareas"]

  R-ERGO-NECK-SCREEN:
    tipo: "ERGONÓMICO"
    nombre: "Flexión cervical por pantalla baja"
    descripcion: "Centro de pantalla por debajo de la línea de ojos (heurística)."
    context: ["office","industrial"]
    if_any: ["screen_below_eyes"]
    severidad: "MEDIA"
    controles:
      Ingeniería: ["Elevar monitor a altura de ojos"]
      Administrativos: ["Pausas activas, ajuste del puesto"]
